<!-- configuracao_pop_cadastro.html -->
<html>
<head>
<title>::.. Virtex Admin - Área de Gerenciamento ..::</title>
{literal}<style type="text/css">
<!--
.style2 {
	font-family: Arial, Helvetica, sans-serif;
	font-weight: bold;
	font-size: 24px;
}
.style1 {color: #666666}
-->
</style>
{/literal}
{literal}
<script>
	
	function habilita(){
	
		tB = document.getElementById("tabela");
		snmp = document.getElementById("snmp");
		
	if (!snmp.checked){
	
		tB.className = "box_fechada";	
		
		document.formulario.snmp_versao.value = "" ;
		document.formulario.snmp_ro_com.value = "" ;
		document.formulario.snmp_rw_com.value = "" ;
		
	
	}
	else{
	
		tB.className = "box_aberta";	
	
	}
}	
</script>
{/literal}

{literal}<script type="text/javascript" src="template/default/ajax_select.js" ></script>{/literal}
<link href="template/default/estilos1.css" rel="stylesheet" type="text/css">
{literal}<script language="JavaScript">

	var regra = new Object();
	
	regra.ip = /^(([0-9]{1,2}|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\.){3}([0-9]{1,2}|1[0-9][0-9]|2[0-4][0-9]|25[0-5])$/;
	
		function valida_ip_radius(){
		
			var sel = regra.ip; 
			var ver = sel.exec(document.form1.radius_server.value); 
			if(!ver && document.form1.radius_server.value !="") 
			{ 
				  alert('o IP '+document.form1.radius_server.value+' não é válido.'); 
				  document.form1.radius_server.focus();
				  document.form1.radius_server.select();
				  return false; 
			} 
			return true; 
			} 

		function valida_ip(){
		
			var sel = regra.ip; 
			var ver = sel.exec(document.formulario.ip.value); 
			if(!ver && document.formulario.ip.value !="") 
			{ 
				  alert('o IP '+document.formulario.ip.value+' não é válido.'); 
				  document.formulario.ip.focus();
				  document.formulario.ip.select();
				  return false; 
			} 
			return true; 
			} 

function checaNome(){
	if (formulario.nome.value == ""){
		window.alert('Não é possivel cadastrar POP com nome em branco');
		return false;
	}
	return true;
}
function verificaTipoPop() {
 	
	formulario.id_pop_ap.disabled = formulario.tipo.value == "C" ;
	formulario.id_pop_ap.value = "" ;

   if (formulario.tipo.value == "CL" || formulario.tipo.value == "B" || formulario.tipo.value == "AP"){
   
   		window.location= "javascript: Dados(formulario.tipo.value);";

   
   }
   
   
   
}
</script>{/literal}
</head>

<body leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" onLoad="javascript:  calc_pop(); habilita();">
<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td align="center" valign="top"><table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr>
          <td height="100%" align="center" valign="middle"><table width="100%" border="0" cellspacing="0" cellpadding="0">
              <tr>
                <td align="center" valign="middle">
<form name="formulario" method="post" action="{$smarty.server.PHP_SELF}" onSubmit="return checaNome();">
                	<input type="hidden" name="op" value="pop">
					<input type="hidden" name="acao" value="{$acao}">
					<input type="hidden" name="id_pop" value="{$id_pop}">
					<input type="hidden" name="id_pop_ap_selected" value="{$id_pop_ap}">


                    <table width="600" border="0" cellspacing="0" cellpadding="0">
                      <tr>
                        <td align="center" valign="middle"><span class="style2">{$titulo} POP</span></td>
                      </tr>
                      <tr>
                        <td align="center" valign="top">
						
						
						<table width="430" border="0" cellspacing="2" cellpadding="0">
                            <tr>
                              <td colspan="4" align="right">
								<table width="100%" border="0" cellpadding="0" cellspacing="0"  style="border:1px solid #CCCCCC;">
                                  <tr>
								  	<td width="14%" height="3px" >&nbsp;</td>
								  </tr>
								  <tr>
                                    <td><p>&nbsp;Nome</p></td>
                                    <td colspan="3"><input name="nome" type="text" id="nome" value="{$nome}" size="40"></td>
                                  </tr>
                                  <tr>
                                    <td><p>&nbsp;Info</p></td>
                                    <td colspan="4"><textarea name="info" cols="50" rows="6">{$info}</textarea></td>
                                  </tr>
                                  <tr>
                                    <td><p>&nbsp;Tipo</p></td>
                                    <td width="24%"><select name="tipo" id="tipo" onChange="verificaTipoPop();">
                                      
                                  {foreach key=id item=nome from=$tipo_pop}

                                    
                                      <option value='{$id}'{if $id == $tipo}selected{/if}>{$nome} </option>
                                      


                                  {/foreach}
                                  
                                    </select>                                    </td>
                                    <td><p>Conectado em </p></td>
                                    <td>
								<select name="id_pop_ap" id="id_pop_ap" style="width: 170px;" onChange="ProcessLoop(this.value);">
                                      <option id="opcoes" value="0"> </option>
                                    </select></td>
                                  </tr>
                                  <tr>
                                    <td><p>&nbsp;Status:</p></td>
                                    <td colspan="4"><select name="status" id="status">
                                      
								  		{foreach key=id item=valor from=$status_pop}
										{if $id != "D"}
                                      
                                      <option value="{$id}" {if $id == $status}selected{/if}>{$valor}</option>
                                      
									  	{/if}
									  {/foreach}
                                    
                                    </select>                                    </td>
                                  </tr>
								  {if $qtde_cli_pop}
                                  <tr>
                                    <td colspan="4"><div align="center">
                                      <p><strong>{$qtde_cli_pop}</strong> clientes 
                                        cadastrados neste pop</p>
                                    </div></td>
                                  </tr>
								  {/if}
                                  <tr>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                  </tr>
                                </table>
								<Br>
								<table width="430" border="0" style="border:1px solid #CCCCCC;">

								<tr>
									<td colspan="4"> <p align="center" class="style1">Informações de Monitoramento</p></td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td><p>IP 									    <input type="text" name="ip" value="{$ipaddr}" onBlur="valida_ip();">
									    &nbsp;&nbsp;Monitorado por:
									  &nbsp;&nbsp;
							<select name="infoserver" style="width:130px;">
								<option value=""></option>
									{foreach item=h from=$hosts}
										<option value="{$h}" {if $h == $infoserver}SELECTED{/if}>{$h}</option>
									{/foreach}
							</select>
									</p></td>
								  </tr>
								  <tr>
								  	<td height="2px">&nbsp;</td>
								  </tr>
								  <tr>
								  	<td colspan="4" valign="top">
									  <p>
						<input type="checkbox" value="t" name="snmp" class="checkbox" {if $snmp=='t'}CHECKED{/if} onClick="habilita();">
									    Ativar SNMP
									<div id="tabela" class="{if $snmp=='f' || $snmp == ""}box_fechada{/if}{if $snmp=='t'}box_aberta{/if} ">
									<table width="100%" border="0" align="center">
										  <tr>
											<td width="101"><p>Versão </p></td>
											<td width="156"><p>RO Community </p></td>
											<td width="149"><p>RW Community </p></td>
										</tr>
												<tr>
												<td>
													<select name="snmp_versao">
													<option value="#"></option>
														<option value="v1" {if $snmp_versao=='v1'}SELECTED{/if}>V1</option>
														<option value="v2c" {if $snmp_versao=='v2c'}SELECTED{/if}>V2C</option>
														<option value="v3" {if $snmp_versao=='v3'}SELECTED{/if}>V3</option>
													</select>												
												</td>
												
												<td><input type="text" name="snmp_ro_com" value="{$snmp_ro_com}"></td>
												
												<td><input type="text" name="snmp_rw_com" value="{$snmp_rw_com}"></td>
											</tr>
									  </table>
									  </div>
								    </p></td>
								  </tr>
						
                              </table></td>
                            </tr>
                            <tr>
                              <td colspan="4" align="right"><input type="submit" name="Submit" value="{$titulo}">                              </td>
                            </tr>
                          </table></td>
                      </tr>
                    </table>
                    <a href="configuracao.php?op=lista_pop">voltar</a><br>
                  </form>
                </td>
              </tr>
            </table></td>
        </tr>
      </table></td>
  </tr>
</table>
	    {literal}

	      <script language="JavaScript">
		  		verificaTipoPop();
		</script>
		{/literal}
</body>


</html>
