<!-- cliente_nova_conta.html -->
{include file='cliente_header.html'}
{if $tipo_conta == "BL"}
<script language="javascript">
var ip_externo = "{$ip_externo}";

{literal}


function redir(){
	var frm = document.frmConta;
	if (ip_externo != "" && frm.redirecionar.checked == false){
		frm.redirect.value = "exclui";
	}else if (ip_externo == "" && frm.redirecionar.checked == true){
		frm.redirect.value = "adiciona";
	}else{
		frm.redirect.value = "";
	}

	return;
}

function alteraNas() {
	var frm = document.frmConta;
/**
	if( frm.id_nas.value != frm.nas_orig.value && !frm.altera_rede.checked ) {
		if( window.confirm("A alteração do NAS exige que o ip seja alterado, deseja continuar ?") ) {
			frm.altera_rede.checked = true;
			alteraNovaSelecao();
		} else {
			frm.id_nas.value = frm.nas_orig.value;
		}
	}
*/
}

function alteraSelecaoIP() {
   var frm = document.frmConta;
	if( frm.selecao_ip.disabled || frm.selecao_ip.value == "A" ) {
		frm.endereco_ip.disabled = true;
 	} else {
 		frm.endereco_ip.disabled = false;
 	}
}




function alteraNovaSelecao() {
	var frm = document.frmConta;
	//frm.selecao_ip.disabled = !frm.altera_rede.checked;
	alteraSelecaoIP();
}



function init() {

	alteraNas();
	alteraSelecaoIP();
	alteraNovaSelecao();


}

function check(){
			csenha=document.frmConta.senha.value;
			cconfsenha=document.frmConta.conf_senha.value;

			msg="";
			erro=0;


			if (csenha != cconfsenha) {
				msg = msg + "Os campos Senha e Confirmação devem conter o mesmo conteúdo.\n";
				erro = 1;
			}
			if (erro == 1){
				alert(msg);
				return false;
			}

	return true;

}


{/literal}
</script>
{/if}
{literal}

<script language="javascript" type="text/javascript">

function Tecla(e){
	if (document.all){ // Internet Explorer
		var tecla = event.keyCode;
		
	}else if(document.layers) // Nestcape
		var tecla = e.which;
		
		if (tecla != 92 && tecla != 47 && tecla != 34  && tecla != 39 && tecla != 126 && tecla != 180 && tecla != 96 && tecla != 94 && tecla != 58 && tecla != 59 && tecla != 44 && tecla != 63 && tecla != 40 && tecla != 41 && tecla != 42 && tecla != 43 && tecla != 124 && tecla != 60 && tecla != 61 && tecla != 62 && tecla != 36 && tecla != 37 && tecla != 38 && tecla != 39 && tecla != 33 && tecla != 34 && tecla != 35 && tecla != 168 && tecla != 64 && tecla != 123 && tecla != 125 && tecla != 170 && tecla != 176 && tecla != 186 && tecla != 172 && tecla != 178 && tecla != 179 && tecla != 185 && tecla != 163 && tecla != 167 && tecla != 224 && tecla != 225 && tecla != 226 && tecla != 227 && tecla != 228 && tecla != 192 && tecla != 193 && tecla != 194 && tecla != 195 && tecla != 196 && tecla != 32  && tecla != 199 && tecla != 231 && tecla != 91 && tecla != 93 && tecla != 200 && tecla != 201 && tecla != 202 && tecla != 203 && tecla != 204 && tecla != 205 && tecla != 206 && tecla != 207 && tecla != 210 && tecla != 211 && tecla != 212 && tecla != 213 && tecla != 214 && tecla != 217 && tecla != 218 && tecla != 219 && tecla != 220 && tecla != 224 && tecla != 225 && tecla != 226 && tecla != 227 && tecla != 228 && tecla != 229 && tecla != 230 && tecla != 231 && tecla != 232 && tecla != 233 && tecla != 234 && tecla != 235 && tecla != 236 && tecla != 237 && tecla != 238 && tecla != 239 && tecla != 240 && tecla != 241 && tecla != 242 && tecla != 243 && tecla != 244 && tecla != 245 && tecla != 246 && tecla != 247 && tecla != 248 && tecla != 249 && tecla != 250 && tecla != 251 && tecla != 252 ){
			return true;
	
	
	}else{
				if (tecla != 8) // backspace
					event.keyCode = 0;
					//return false;
				else
				
					return true;
			}
}

</script>


{/literal}

<body >
<form name="frmConta" method="post" action="{$smarty.server.PHP_SELF}" onSubmit="javascript:return check(this);">

				{if $tipo_conta == "BL"}
                 <table width="100" border="0" cellspacing="0" cellpadding="0" align="center">
                    <tr>
                      <td>
                      <table align="center">
					              <tr>
					                <td align="center" valign="middle"><strong><font face="arial" size="4" color="black">Banda Larga</font></strong></td>
					              </tr>
          				</table>

      <table width="400" border="0" align="CENTER" cellpadding="2" cellspacing="2">
        <tr> 
          <td>{if count($erros)} {foreach item=erro from=$erros}<font color="#FF0000" face=arial size=-1><b>{$erro}</b></font>{/foreach} 
            {/if}</td>
        </tr>
        <tr> 
          <td align="center" valign="middle"> </td>
        </tr>
        <tr> 
          <td align="center" valign="top"> 
            <table width="100%" border="0">
              <tr> 
                <td width="222" valign="top"><table width="200" border=0 bgcolor="#F1F1F1">
                    <tr> 
                      <td colspan=2><h2><font color="#000000">Dados do Usuário</font></h2></td>
                    </tr>
                    <tr> 
                      <td bgcolor="#FFFFFF" align="right" width="50" valign="top"> 
                        <p>Username:</p></td>
                      <td bgcolor="#FFFFFF" colspan=2><input name="username" type="text" id="username" maxlength="30" onKeyPress="return Tecla(event);" ></td>
                    </tr>
                    <tr> 
                      <td bgcolor="#FFFFFF" align="right" width="50" valign="top"> 
                        <p>Senha:</p></td>
                      <td bgcolor="#FFFFFF" colspan=2> <input type="password" maxlength="32" name="senha" id="senha" > 
                      </td>
                    </tr>
                    <tr> 
                      <td bgcolor="#FFFFFF" align="right" width="50" valign="top"> 
                        <p>Confirme:</p></td>
                      <td bgcolor="#FFFFFF" colspan=2> <input type="password" maxlength="32" name="conf_senha" id="conf_senha" > 
                      </td>
                    </tr>
                    <tr> 
                      <td width="50" align="right" valign="top" bgcolor="#FFFFFF"> 
                        <p>Status:</p></td>
                      <td bgcolor="#FFFFFF" colspan=2> <SELECT name='status' id="status">
					{foreach key=id item=nome from=$lista_status}
					      <OPTION VALUE='{$id}'  {if $id == $status}SELECTED{/if} >{$nome}</OPTION>
					{/foreach}
					    </SELECT> </td>
                    </tr>
                  </table></td>
                <td width="50"><table width="200" border=0 bgcolor="#F1F1F1" id="disc">
                    <tr> 
                      <td colspan=2><p><strong>Dados da Conexão</strong></p></td>
                    </tr>
                    <tr> 
                      <td bgcolor="#FFFFFF" align="right" width="70" valign="top"><p>POP:</p></td>
                      <td bgcolor="#FFFFFF"> <SELECT name='id_pop' >
										{foreach item=v from=$lista_pops}

                          <OPTION value="{$v.id_pop}" {if $v.id_pop == $id_pop}SELECTED{/if}>{$v.nome}</OPTION>
										{/foreach}

                        </SELECT> </td>
                    </tr>
                    <tr> 
                      <td bgcolor="#FFFFFF" align="right" width="70" valign="top"><p>NAS:</p></td>
                      <td bgcolor="#FFFFFF"> <SELECT name='id_nas' >
										{foreach item=v from=$lista_nas}

                          <OPTION value="{$v.id_nas}" {if $v.id_nas == $id_nas}SELECTED{/if}>{$v.tp}: 
                          {$v.nome}</OPTION>
										{/foreach}

                        </SELECT> </td>
                    </tr>
                    <tr> 
                      <td bgcolor="#FFFFFF" align="right" width="70" valign="top"><p> 
                          <!--input type="checkbox" name="altera_rede" value="1" class="checkbox" {if $altera_rede}CHECKED{/if} onClick="javascript:alteraNovaSelecao();" onChange="javascript:alteraNovaSelecao();">
                  Nova -->
                          Seleção de Rede/IP:</p></td>
                      <td bgcolor="#FFFFFF"><select name='selecao_ip' onchange='javascript:alteraSelecaoIP();'>
                          <option value='A' >Automática</option>
                          <option value='M' >Manual</option>
                        </select> <br> <input type="text" name="endereco_ip" id="endereco_ip2"></td>
                    </tr>
                    <tr>
                      <td bgcolor="#FFFFFF" align="right" width="70" valign="top"><p>MAC:</p></td>
                      <td bgcolor="#FFFFFF" valign="top"><input type="text" name="mac" maxlength="17" size=17></td>
                      {literal} 
                      <script>
									//verificaTipoRede();


									</script>
                      {/literal} </tr>
                    <tr valign="MIDDLE"> 
                      <td bgcolor="#FFFFFF" align="right"> <p>Redirecionar:</p></td>
                      <td bgcolor="#FFFFFF" colspan="3"> <p> 
                          <input name="redirecionar" type="checkbox" value="true" id="redirecionar2" class="checkbox" {if $ip_externo}checked{/if}>
                          {if $ip_externo}IP: {$ip_externo}{/if}</p></td>
                    </tr>
                  </table></td>
              </tr>
              <tr> 
                <td colspan="2">
				<p align="center"><strong><font size="1" face="Verdana, Arial, Helvetica, sans-serif">Banda</font></strong></p>
                    
                  <input name="op" type="hidden" id="op" value="conta">
                    <input name="id_cliente" type="hidden" id="id_cliente" value="{$id_cliente}">
                    <input name="id_cliente_produto" type="hidden" id="id_cliente_produto" value="{$id_cliente_produto}">
                    <input name="dominio" type="hidden" id="dominio" value="{$dominio}">
                    <input name="tipo_conta" type="hidden" id="tipo_conta" value="{$tipo_conta}">
                    <input type="hidden" name="nas_orig" value="{$nas_orig}">
                    <input name="acao" type="hidden" id="acao" value="cad">
                    <input name="ip_externo" type="hidden" value="{$ip_externo}" id="ip_externo2">
                    <input name="sop" type="hidden" value="nova_conta" id="sop2">
                    <input name="_dominio" type="hidden" value="{$dominio}" id="_dominio">
                    <input name="_username" type="hidden" value="{$username}" id="_username">
                   
                  <table width="300" border="0" align="center" cellpadding="0" cellspacing="0">
                    <tr> 
                      <td width="46%"> <p align="right">Banda Upload kbps&nbsp;&nbsp;</p></td>
                      <td width="54%"> <p>Banda Download kbps </p></td>
                    </tr>
                    <tr> 
                      <td> <div align="right">
                          <SELECT name='upload_kbps' >
                	{foreach key=id item=nome from=$lista_upload}
                            <OPTION VALUE='{$nome.id}' {if $nome.id == $upload_kbps}SELECTED{/if} >{$nome.banda}</OPTION>
                    {/foreach}
                          </SELECT>
                          &nbsp;&nbsp;</div></td>
                      <td> <SELECT name='download_kbps' >
					{foreach key=id item=nome from=$lista_download}
                          <OPTION VALUE='{$nome.id}' {if $nome.id == $download_kbps}SELECTED{/if} >{$nome.banda}</OPTION>
                    {/foreach}
                        </SELECT> </td>
                    </tr>
                </table></td>
              </tr>
              <tr> 
                <td colspan="2" align="center"><input name="botao_enviar2" type="submit" class=input2 id="botao_enviar2" value="Alterar &gt;&gt;" style="border: 1px solid #444444; font-size: 10px; background-color: #f3f3f3;"></td>
              </tr>
            </table>
            
          </td>
        </tr>
      </table>




                          {/if}

                          {if $tipo_conta|trim == "E"}

                          {literal}
                          <script>
                          function check(){
						  			csenha=document.frmConta.senha.value;
						  			cconfsenha=document.frmConta.conf_senha.value;

						  			msg="";
						  			erro=0;


						  			if (csenha != cconfsenha || csenha == "" || cconfsenha == "") {
						  				msg = msg + "Os campos Senha e Confirmação devem conter o mesmo conteúdo.\n";
						  				erro = 1;
						  			}
						  			if (erro == 1){
						  				alert(msg);
						  				return false;
						  			}

						  	return true;

						  }

                          </script>
                          {/literal}
                               <input type="hidden" name="op" value="conta">
						       <input type="hidden" name="id_cliente" value="{$id_cliente}">
						  	   <input type="hidden" name="username" value="{$username}">
						       <input name="dominio__" type="hidden" value="{$dominio}" id="dominio__">
						       <input type="hidden" name="tipo_conta" value="{$tipo_conta}">
						       <input type="hidden" name="acao" value="cad">
    <input name="sop" type="hidden" value="nova_conta" id="sop">
    <table align="center">
								<tr>
									<td align="center" valign="middle"><strong><font face="arial" size="4" color="black">E-Mail</font></strong></td>
								</tr>
					    </table>

                          <table width="450" border=0 bgcolor="#F1F1F1" align="center">
						                <tr>

        <td colspan=2><h2><font color="#000000">Dados da Conta
          <input name="_dominio2" type="hidden" value="{$dominio}" id="_dominio2">
          <input name="_username2" type="hidden" value="{$username}" id="_username2">
          <input name="id_cliente_produto" type="hidden" value="{$id_cliente_produto}" id="id_cliente_produto">
          </font></h2></td>
						                </tr>
						                <tr>
						                  <td bgcolor="#FFFFFF" align="right" width="50" valign="top">
						  					<p>Username:</p></td>
						                  <td bgcolor="#FFFFFF" colspan=2 width="300"><p>
            <input type="text" maxlength="30" name="username" value="{$username}" id="username" onKeyPress="return Tecla(event);" >
            @
            <select name="dominio" id="dominio">
              {foreach item=a from=$dominios_provedor}
			  {if $a.dominio !=""}<option value="{$a.dominio}" {if $a.dominio == $dominio}SELECTED{/if}>{$a.dominio}</option>{/if}
			  {/foreach}
            </select> 
          </p></td>
						                </tr>
						                <tr>
						                  <td bgcolor="#FFFFFF" align="right" width="50" valign="top">
						  					<p>Senha:</p></td>
						                  <td bgcolor="#FFFFFF" colspan=2> <input type="password" maxlength="32" name="senha" id="senha" >
						                  </td>
						                </tr>
						                <tr>
						                  <td bgcolor="#FFFFFF" align="right" width="50" valign="top">
						  					<p>Confirme:</p></td>
						                  <td bgcolor="#FFFFFF" colspan=2> <input type="password" maxlength="32" name="conf_senha" id="conf_senha" >
						                  </td>
						                </tr>
						                <tr>
						                  <td width="50" align="right" valign="top" bgcolor="#FFFFFF">
						  					<p>Quota:</p></td>

						                <td bgcolor="#FFFFFF" colspan=2> <input name="quota" type="text" id="quota" value="{$quota_por_conta}"></td>
						                </tr>
						                <tr>
						                <td colspan=2 align="center"><input type="submit" name="Submit" value="Alterar >>"></td>
						                </tr>
            			  </table>
                          {/if}
                          {if $tipo_conta|trim == "H"}

                          {literal}
                          <script>
                          function check(){
						  			csenha=document.frmConta.senha.value;
						  			cconfsenha=document.frmConta.conf_senha.value;

						  			msg="";
						  			erro=0;


						  			if (csenha != cconfsenha || csenha == "" || cconfsenha == "") {
						  				msg = msg + "Os campos Senha e Confirmação devem conter o mesmo conteúdo.\n";
						  				erro = 1;
						  			}
						  			if (erro == 1){
						  				alert(msg);
						  				return false;
						  			}

						  	return true;

						  }

                          </script>
                          {/literal}

                               <input type="hidden" name="op" value="conta">
						       <input type="hidden" name="id_cliente" value="{$id_cliente}">
						  	   <input type="hidden" name="username" value="{$username}">
						       <input type="hidden" name="dominio" value="{$dominio}">
						       <input type="hidden" name="tipo_conta" value="{$tipo_conta}">
						       <input type="hidden" name="acao" value="cad">
						       <input type="hidden" name="tipo_hospedagem" value="{$tipo_hospedagem}">
						       <input type="hidden" name="dominio_hospedagem" value="{$dominio_hospedagem}">
    <input name="sop3" type="hidden" value="nova_conta" id="sop3">
    <table align="center">
								<tr>
									<td align="center" valign="middle"><strong><font face="arial" size="4" color="black">Hospedagem</font></strong></td>
								</tr>
					    </table>

                          <table width="450" border=0 bgcolor="#F1F1F1" align="center">
						                <tr>

        <td colspan=2><h2><font color="#000000">Dados da Conta
          <input name="sop2" type="hidden" value="nova_conta" id="sop5">
          <input name="_dominio32" type="hidden" value="{$dominio}" id="_dominio32">
          <input name="_username32" type="hidden" value="{$username}" id="_username32">
          <input name="op2" type="hidden" value="conta" id="op2">
          <input name="id_cliente2" type="hidden" value="{$id_cliente}" id="id_cliente2">
          <input name="id_cliente_produto2" type="hidden" value="{$id_cliente_produto}" id="id_cliente_produto2">
          </font></h2></td>
						                </tr>
						                <tr>
						                  <td bgcolor="#FFFFFF" align="right" width="50" valign="top">
						  					<p>Username:</p></td>
						                  <td bgcolor="#FFFFFF" colspan=2 width="300"><p><input type="text" maxlength="30" name="user" value="{$username}" onKeyPress="return Tecla(event);" ></p></td>
						                </tr>
						                <tr>
						                  <td bgcolor="#FFFFFF" align="right" width="50" valign="top">
						  					<p>Senha:</p></td>
						                  <td bgcolor="#FFFFFF" colspan=2> <input type="password" maxlength="32" name="senha" id="senha" >
						                  </td>
						                </tr>
						                <tr>
						                  <td bgcolor="#FFFFFF" align="right" width="50" valign="top">
						  					<p>Confirme:</p></td>
						                  <td bgcolor="#FFFFFF" colspan=2> <input type="password" maxlength="32" name="conf_senha" id="conf_senha" >
						                  </td>
						                </tr>
						                <tr>
						                  <td width="50" align="right" valign="top" bgcolor="#FFFFFF">
						  					<p>Dominio:</p></td>

						                <td bgcolor="#FFFFFF" colspan=2> <p>{if $tipo_hospedagem == "D"}www.{$dominio_hospedagem}{/if}{if $tipo_hospedagem != "D"}www.{$dominio}/{$username}{/if}</p></td>
						                </tr>
						                	<tr>
												<td width="50" align="right" valign="top" bgcolor="#FFFFFF">
												<p>FTP:</p></td>
												<td bgcolor="#FFFFFF" colspan=2><p> {if $tipo_hospedagem == "D"}ftp.{$dominio_hospedagem}{/if}{if $tipo_hospedagem != "D"}ftp.{$dominio}{/if}</p></td>
						                	</tr>
						                <tr>
						                <td colspan=2 align="center"><input type="submit" name="Submit" value="Alterar >>"></td>
						                </tr>
            			  </table>
            	
                          {/if}

                          {if $tipo_conta|trim == "D"}

                          {literal}
                          <script>
                          function check(){
						  			csenha=document.frmConta.senha.value;
						  			cconfsenha=document.frmConta.conf_senha.value;

						  			msg="";
						  			erro=0;


						  			if (csenha != cconfsenha || csenha == "" || cconfsenha == "") {
						  				msg = msg + "Os campos Senha e Confirmação devem conter o mesmo conteúdo.\n";
						  				erro = 1;
						  			}
						  			if (erro == 1){
						  				alert(msg);
						  				return false;
						  			}

						  	return true;

						  }

                          </script>
                          {/literal}

                               <input type="hidden" name="op" value="conta">
						       <input type="hidden" name="id_cliente" value="{$id_cliente}">
    <input type="hidden" name="dominio" value="{$dominio}">
						       <input type="hidden" name="tipo_conta" value="{$tipo_conta|trim}">
						       <input type="hidden" name="acao" value="cad">
    <table align="center">
								<tr>
									<td align="center" valign="middle"><strong><font face="arial" size="4" color="black">Discado</font></strong></td>
								</tr>
					    </table>

                          <table width="450" border=0 bgcolor="#F1F1F1" align="center">
						                <tr>

        <td colspan=2><h2><font color="#000000">Dados da Conta
          <input name="sop" type="hidden" value="nova_conta" id="sop">
          <input name="_dominio" type="hidden" value="{$dominio}" id="_dominio">
          <input name="_username" type="hidden" value="{$username}" id="_username">
          <input name="op" type="hidden" value="conta" id="op">
          <input name="id_cliente" type="hidden" value="{$id_cliente}" id="id_cliente">
          <input name="id_cliente_produto" type="hidden" value="{$id_cliente_produto}" id="id_cliente_produto">
          </font></h2></td>
						                </tr>
						                <tr>
						                  <td bgcolor="#FFFFFF" align="right" width="50" valign="top">
						  					<p>Username:</p></td>
						                  <td bgcolor="#FFFFFF" colspan=2 width="300"><p>
            <input name="username" type="text" value="{$username}" maxlength="30" id="username" onKeyPress="return Tecla(event);" >
          </p></td>
						                </tr>
						                <tr>
						                  <td bgcolor="#FFFFFF" align="right" width="50" valign="top">
						  					<p>Senha:</p></td>
						                  <td bgcolor="#FFFFFF" colspan=2> <input type="password" maxlength="32" name="senha" id="senha" >
						                  </td>
						                </tr>
						                <tr>
						                  <td bgcolor="#FFFFFF" align="right" width="50" valign="top">
						  					<p>Confirme:</p></td>
						                  <td bgcolor="#FFFFFF" colspan=2> <input type="password" maxlength="32" name="conf_senha" id="conf_senha" >
						                  </td>
						                </tr>
						                <tr>
						                  <td width="50" align="right" valign="top" bgcolor="#FFFFFF">
						  					<p>Status:</p></td>

						                <td bgcolor="#FFFFFF" colspan=2>
						                	<SELECT name='status'>
											{foreach key=id item=nome from=$lista_status}
											<OPTION VALUE='{$id}'  {if $id == $status}SELECTED{/if} >{$nome}</OPTION>
											{/foreach}
											</SELECT>

						                </td>
						                </tr>
						                	<tr>
												<td width="50" align="right" valign="top" bgcolor="#FFFFFF">
												<p>Telefone:</p></td>
												<td bgcolor="#FFFFFF" colspan=2><input type="text" name="foneinfo" value="{$foneinfo}"></td>
						                	</tr>
						                <tr>

        <td colspan=2 align="center" >
<input type="submit" name="Submit" value="Alterar >>"></td>
						                </tr>
            			  </table>    
      {/if}
	  </form>
	  <p align="center"><a href="{$smarty.server.PHP_SELF}?op=produto&tipo={$tipo}&id_cliente={$id_cliente}">voltar</a></p>
</body>

{if $tipo_conta == "BL"}

{ literal }
<script language="JavaScript">

init();



</script>
{ /literal }
{/if}